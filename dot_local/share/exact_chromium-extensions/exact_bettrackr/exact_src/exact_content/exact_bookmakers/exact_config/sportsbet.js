/*!
 * BetTrackr Chrome Extension (c) 2025 BetTrackr Pty Ltd
 * Licensed for use with a valid BetTrackr account only.
 * Reverse engineering or modification is prohibited.
 */
const sportsbet={bookmaker_name:"Sportsbet",balance:'[data-automation-id="header-account-balance"]',pages:{"*":{button:'[data-automation-id^="betslip-multi-"] > :first-child,\n      [data-automation-id^="betslip-single-"]',filter:function(t){return t.find('[data-automation-id^="betslip-bet-odds"], [data-automation-id^="betslip-multi-odds"]').length>0},fields:{bet_type:async function(t){return"Qualifying Bet"},stake:async function(t){const n=t.find('[data-automation-id="betslip-stake"]').first();return n.length?n.val():t.find('[data-automation-id="betslip-bet-confirm-stake"]').first().text()},odds:async function(t){const n=t.find('[data-automation-id="betslip-multi-odds"]').first();if(n.length>0)return n.text().trim();const e=t.find('[data-automation-id="betslip-bet-odds-rolling-next-text"]').first();return e.length?e.text():t.find('[data-automation-id="betslip-bet-odds"]').first().text().trim()},selection:async function(t){return t.find('[data-automation-id="betslip-bet-title"]').first().text().trim()},date_placed:async function(t){return""},status:async function(t){return"Pending"},date_resulted:async function(t){return""},bookmaker_internal_id:async function(t){return""},is_racing:async function(t){const n=t.find('[data-automation-id="betslip-bet-subtitle"]').text().trim();return/\sR\d+$/.test(n)},track:async function(t){return t.find('[data-automation-id="betslip-bet-subtitle"]').first().text().trim().replace(/\sR\d+$/,"").replace("Poly","").trim()},runner:async function(t){return t.find('[data-automation-id="betslip-bet-title"]').first().text().trim().replace(/^\d+\.\s*/,"").replace(/\s*\(\d+\)$/,"")},event_name:async function(t){return t.find('[data-automation-id="betslip-bet-subtitle"]').text().trim()}}},bet_history:{button:'div[data-automation-id^="bet-id-"]',fields:{bet_type:async function(t){return t.find('[data-automation-id="bet-placement-info"]').text().trim().includes("Bonus Bet")?"Bonus Bet (SNR)":"Qualifying Bet"},stake:async function(t){let n=t.find('[data-automation-id="bet-placement-info"]').text().trim().match(/\$([0-9,]+(?:\.[0-9]{2})?)/);return n[1]?n[1]:0},odds:async function(t){return t.find('[data-automation-id="header"]').text().trim().split("@")[1].trim()},selection:async function(t){return t.find('[data-automation-id="header"]').text().trim().split("@")[0].trim()},date_placed:async function(t){try{const n=t;if(!n.length)throw Error("Bet element not found");const e=(await toggleAccordian(n,'[data-automation-id="bet-place-on-value"]')).text().trim();if(!e)throw Error("Date text is empty");const i=e.replace(/\b[A-Z]{3,4}\b/,"GMT"),a=new Date(i);if(isNaN(a))throw Error(`Invalid date parsed from text: "${e}"`);return 2001==a.getFullYear()&&a.setFullYear((new Date).getFullYear()),a.toISOString().split("T")[0]}catch(t){return null}},status:async function(t){let n=t.find('[data-automation-id="result"]').text().trim();return"No Return"==n?"Lost":"Void"==n?"Void":n.includes("Potential Winnings")?"Pending":"Won"},date_resulted:async function(t){let n=t.find('[data-automation-id="start-date"]').text().trim();const e=(new Date).getFullYear(),i=n.replace(/^.*,\s*/,"")+" "+e;let a=new Date(i);const o=a.getTimezoneOffset();return a=new Date(a.getTime()-6e4*o),a.toISOString().split("T")[0]},bookmaker_internal_id:async function(t){const n=t;if(!n.length)throw Error("Bet element not found");return n.attr("data-automation-id").replace("bet-id-","")},is_racing:async function(t){let n=t.find('[data-automation-id="link"]').text().trim();return isRacingFromEventName(n)},track:async function(t){return t.find('[data-automation-id="link"]').text().trim().split("â€¢")[0].trim()},runner:async function(t){return t.find('[data-automation-id="header"]').first().text().trim().split("@")[0].trim().replace(/^\d+\.\s*/,"").replace(/\s*\(\d+\)$/,"")},event_name:async function(t){return t.find('[data-automation-id="link"]').text().trim().split("ãƒ»")[0].trim()},event_date:async function(t){let n,e=t.find('[data-automation-id="start-date"]').text().trim();n=/\b\d{4}\b/.test(e)?e:e+" "+(new Date).getFullYear();let i=new Date(n);const a=i.getTimezoneOffset();return i=new Date(i.getTime()-6e4*a),i.toISOString().split("T")[0]}}}}};async function toggleAccordian(t,n,e=3e3,i=50){const a=()=>"0px"===t.find('[data-automation-id="accordion-content"] > div').css("height");if(a()){const n=t.find('[data-automation-id="accordion-header-title"]');if(!n.length)throw Error("Accordion header not found");n.click();const o=Date.now();for(;a();){if(Date.now()-o>e)throw Error("Accordion did not open within timeout");await new Promise((t=>setTimeout(t,i)))}}return t.find(n)}