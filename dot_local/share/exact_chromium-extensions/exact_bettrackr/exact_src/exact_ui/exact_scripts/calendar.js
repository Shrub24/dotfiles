/*!
 * BetTrackr Chrome Extension (c) 2025 BetTrackr Pty Ltd
 * Licensed for use with a valid BetTrackr account only.
 * Reverse engineering or modification is prohibited.
 */
import{fetchBetStatuses as t,fetchCalendarData as e,updateBetStatus as n,editBet as a,formatCurrency as i}from"../../shared.js";export async function init(){const e=await t();new s("calendar","month",e)}class s{constructor(t,e,n,a={}){this.container=document.getElementById(t),this.statuses=n,"year"===e&&"month"==e||(e="month"),this.mode=e,this.id="betcal-"+Math.random().toString(36).substr(2,9),this.total=0,this.options={showProfit:!0,showPending:!0,showWeekDayTotal:!0,showTotal:!0,currentDate:new Date,...a},this.currentDate=new Date(this.options.currentDate),this.cache={},this.minProfitCellID="",this.maxProfitCellID="",this.init()}init(){this.container&&(this.injectStyles(),this.container.innerHTML=this.renderHeader(),this.changeMode(this.mode),this.setupListeners())}setupListeners(){document.getElementById(this.id+"-toggleProfit")?.addEventListener("change",(t=>{const e=t.target.checked;this.options.showProfit=e,this.updateBackgrounds(),this.toggleProfit()})),document.getElementById(this.id+"-togglePending")?.addEventListener("change",(t=>{const e=t.target.checked;this.options.showPending=e,this.updateBackgrounds(),this.togglePending()})),document.getElementById(this.id+"-toggleTotal")?.addEventListener("change",(t=>{const e=t.target.checked;this.options.showTotal=e,this.toggleTotal()})),document.getElementById(this.id+"-toggleWeekDayTotal")?.addEventListener("change",(t=>{const e=t.target.checked;this.options.showWeekDayTotal=e,this.toggleWeekDayTotal()})),document.getElementById(this.id+"-btn-view-month")?.addEventListener("click",(t=>{"month"!=this.mode&&this.changeMode("month")})),document.getElementById(this.id+"-btn-view-year")?.addEventListener("click",(t=>{"year"!=this.mode&&this.changeMode("year")})),document.getElementById(this.id+"-btn-view-day")?.addEventListener("click",(t=>{"day"!=this.mode&&this.changeMode("day")})),document.getElementById(this.id+"-previous")?.addEventListener("click",(t=>{this.previous()})),document.getElementById(this.id+"-title")?.addEventListener("click",(t=>{this.reset()})),document.getElementById(this.id+"-next")?.addEventListener("click",(t=>{this.next()}));const t=this;$("#"+this.id).on("click",".status-dropdown-item",(async function(e){const a=$(this).data("bet-id"),i=$(this).data("status"),s=$(this).data("date");(await n(a,i,s)).success&&t.renderView()})),$("#"+this.id).on("click",".edit-bet-link",(async function(t){const e=$(this).data("bet-id");a(e)}))}getFormattedDate(){return this.currentDate.toISOString().split("T")[0]}injectStyles(){if(document.getElementById("bet-calendar-styles"))return;const t=document.createElement("style");t.id="bet-calendar-styles",t.textContent="\n            .bet-calendar {\n                background: white;\n                border-radius: 8px;\n                padding: 0.5rem;\n                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n                border: 1px solid #e2e8f0;\n                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            }\n\n            .view-group > button.active {\n                background: #37375f !important;\n                opacity: 0.65;\n                pointer-events: none;\n            }\n\n            .bet-calendar-title button {\n                padding: 0.25rem;\n                cursor: pointer;\n                font-size: 1rem;\n            }\n\n            .bet-calendar-table {\n                width: 100%;\n                border-collapse: collapse;\n                table-layout: fixed;\n            }\n\n            .bet-calendar-header-row {\n                background-color: #f8fafc;\n                border-bottom: 2px solid black;\n            }\n\n            .bet-calendar-header-cell {\n                padding: 0.75rem 0.25rem;\n                font-size: 0.75rem;\n                font-weight: 700;\n                text-align: center;\n                border-right: 1px solid #e2e8f0;\n                background-color: #f1f5f9;\n            }\n\n            .bet-calendar-header-cell:last-child {\n                border-right: none;\n            }\n\n            .calendar-cell {\n                border: 1px solid #e2e8f0;\n                border-top: none;\n                text-align: center;\n                vertical-align: middle;\n                padding: 0.25rem;\n                white-space: nowrap;\n            }\n\n            .bet-calendar-day {\n                height: 50px;\n            }\n\n            .bet-calendar-month {\n                height: 80px;\n            }\n\n            .bet-calendar-day-cell {\n                height: 100%;\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: center;\n                border-radius: 4px;\n                background-color: #f8fafc;\n                transition: background-color 0.2s ease;\n                cursor: pointer;\n                min-height: 40px;\n                white-space: nowrap;\n            }\n\n            .bet-calendar-day-cell {\n                transition: background-color 0.2s ease, box-shadow 0.2s ease;\n            }\n\n            .bet-calendar-day-cell:hover {\n                background-color: #e2e8f0; /* subtle highlight color */\n                box-shadow: inset 0 0 0 1000px rgba(0, 0, 0, 0.03); /* soft overlay */\n                cursor: pointer;\n            }\n\n            .bet-calendar-day-cell.today {\n                border: 2px solid #0f0f3f !important;\n            }\n            .bet-calendar-day-cell.max-profit {\n                border: 2px solid #059669;\n            }\n            .bet-calendar-day-cell.min-profit {\n                border: 2px solid #dc2626;\n            }\n\n            .bet-calendar-day-cell.has-data.pending {\n                background-color: #fefce8;\n            }\n\n            .bet-calendar-day-cell.has-data.positive {\n                background-color: #f0fdf4;\n            }\n\n            .bet-calendar-day-cell.has-data.negative {\n                background-color: #fef2f2;\n            }\n\n            .bet-calendar-day-number {\n                font-size: 0.875rem;\n                font-weight: 500;\n                margin-bottom: 2px;\n            }\n\n            .bet-calendar-month-name {\n                font-size: 1rem;\n                font-weight: 500;\n            }\n\n            .bet-calendar-day-text {\n                font-size: 0.725rem;\n                font-weight: 700;\n                white-space: nowrap;\n            }\n\n            .bet-calendar-month-text {\n                font-size: 1rem;\n                font-weight: 700;\n            }\n\n            .bet-calendar-day-text.positive,\n            .bet-calendar-total-text.positive,\n            .bet-calendar-summary-text.positive,\n            .bet-calendar-month-text.positive {\n                color: #059669;\n            }\n\n            .bet-calendar-day-text.negative,\n            .bet-calendar-total-text.negative,\n            .bet-calendar-summary-text.negative,\n            .bet-calendar-month-text.negative {\n                color: #dc2626;\n            }\n\n            .bet-calendar-day-text.neutral,\n            .bet-calendar-total-text.neutral,\n            .bet-calendar-summary-text.neutral,\n            .bet-calendar-month-text.neutral {\n                color: #6b7280;\n            }\n\n            .loss-text{\n                color: darkred;\n                font-weight: bold;\n            }\n            .profit-text{\n                color: darkgreen;\n                font-weight: bold;\n            }\n\n            .bet-status-won { background-color: #d1e7dd;  }\n            .bet-status-lost { background-color: #f8d7da; }\n            .bet-status-cashedout { background-color: #cff4fc; }\n            .bet-status-void { background-color: #e2e3e5; }\n            .bet-status-pending { background-color: #fff3cd; }\n            .bet-status-bonus { background-color: #cfe2ff; }\n            .bet-status-default { background-color: #f8f9fa; }\n\n            .calendar-bet-tabs .nav-link {\n                color: var(--bettrackr-blue);\n            }\n\n            .bet-calendar-total {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                padding-top: 0.75rem;\n                font-size: 1.25rem;\n                color: #64748b;\n                font-weight: 700;\n            }\n\n            .bet-calendar-summary-text {\n                font-size: 0.700rem;\n                font-weight: 700;\n                overflow: hidden;\n            }\n\n            .bet-calendar-empty {\n                opacity: 0.3;\n            }\n\n            .bet-calendar-summary-row td {\n                height: 25px !important;\n            }\n\n            .bet-calendar-summary-row {\n                border-top: 2px solid black;\n                background-color: #f1f5f9;\n            }\n\n            .edit-bet-link:hover {\n                cursor: pointer;\n            }\n\n            @media (max-width: 480px) {\n                .bet-calendar {\n                    padding: 1rem;\n                }\n\n                .bet-calendar-day {\n                    height: 40px;\n                }\n\n                .bet-calendar-day-cell {\n                    min-height: 30px;\n                }\n\n                .bet-calendar-day-number {\n                    font-size: 0.75rem;\n                    font-weight: 500;\n                    margin-bottom: 1px;\n                }\n                .bet-calendar-day-text {\n                    font-size: 0.7rem;\n                    font-weight: 700;\n                    white-space: nowrap;\n                }\n\n                .bet-calendar-month-name {\n                    font-size: 1rem;\n                    font-weight: 500;\n                }\n\n\n                .bet-calendar-month-text {\n                    font-size: 0.9rem;\n                    font-weight: 700;\n                }\n            }\n        ",document.head.appendChild(t)}setDate(t){this.currentDate=new Date(t)}previousMonth(){this.currentDate.setMonth(this.currentDate.getMonth()-1),this.updateTitle(),this.renderView()}previousDay(){this.currentDate.setDate(this.currentDate.getDate()-1),this.updateTitle(),this.renderView()}nextDay(){this.currentDate.setDate(this.currentDate.getDate()+1),this.updateTitle(),this.renderView()}nextMonth(){this.currentDate.setMonth(this.currentDate.getMonth()+1),this.updateTitle(),this.renderView()}previousYear(){this.currentDate.setFullYear(this.currentDate.getFullYear()-1),this.updateTitle(),this.renderView()}next(){"year"==this.mode?this.nextYear():"month"==this.mode?this.nextMonth():"day"==this.mode&&this.nextDay()}previous(){"year"==this.mode?this.previousYear():"month"==this.mode?this.previousMonth():"day"==this.mode&&this.previousDay()}nextYear(){this.currentDate.setFullYear(this.currentDate.getFullYear()+1),this.updateTitle(),this.renderView()}reset(){const t=new Date;("day"===this.mode?this.currentDate.toDateString()===t.toDateString():this.currentDate.getFullYear()===t.getFullYear()&&this.currentDate.getMonth()===t.getMonth())||(this.currentDate=t,this.updateTitle(),this.renderView())}renderHeader(){let t=`<div id="${this.id}" class="">`;return t+=`\n        <div class="d-flex justify-content-end align-items-center mb-2 gap-1">\n            <div class="btn-group view-group" role="group" aria-label="Calendar View and Settings">\n\n                \x3c!-- Year View --\x3e\n                <button type="button" id="${this.id}-btn-view-year" class="btn btn-primary btn-sm" title="Year View">\n                    <i class="bi bi-grid-3x3-gap-fill"></i>\n                </button>\n\n                \x3c!-- Month View --\x3e\n                <button type="button" id="${this.id}-btn-view-month" class="btn btn-primary btn-sm" title="Month View">\n                    <i class="bi bi-calendar-event"></i>\n                </button>\n\n            </div>\n\n            \x3c!-- Settings Dropdown --\x3e\n            <button class="btn btn-primary btn-sm dropdown-toggle" type="button" id="calendarSettings" data-bs-auto-close="outside" data-bs-toggle="dropdown" aria-expanded="false" title="Settings">\n            <i class="bi bi-gear"></i>\n            </button>\n\n            \x3c!-- Dropdown Menu --\x3e\n            <ul class="dropdown-menu dropdown-menu-end p-2" aria-labelledby="calendarSettings" style="min-width: 220px;">\n            <li>\n                <div class="form-check">\n                <input class="form-check-input" type="checkbox" id="${this.id}-toggleProfit" ${!1!==this.options.showProfit?"checked":""}>\n                <label class="form-check-label" for="${this.id}-toggleProfit">Show Profit</label>\n                </div>\n            </li>\n            <li>\n                <div class="form-check">\n                <input class="form-check-input" type="checkbox" id="${this.id}-togglePending" ${!1!==this.options.showPending?"checked":""}>\n                <label class="form-check-label" for="${this.id}-togglePending">Show Pending Bets</label>\n                </div>\n            </li>\n            <li>\n                <div class="form-check">\n                <input class="form-check-input" type="checkbox" id="${this.id}-toggleWeekDayTotal" ${!1!==this.options.showWeekDayTotal?"checked":""}>\n                <label class="form-check-label" for="${this.id}-toggleWeekDayTotal">Show Week Day Total</label>\n                </div>\n            </li>\n            <li>\n                <div class="form-check">\n                <input class="form-check-input" type="checkbox" id="${this.id}-toggleTotal" ${!1!==this.options.showTotal?"checked":""}>\n                <label class="form-check-label" for="${this.id}-toggleTotal">Show Grand Total</label>\n                </div>\n            </li>\n            </ul>\n        </div>\n        `,t+=`\n            <div class="bet-calendar-title d-flex justify-content-center align-items-center my-2">\n                <div class="btn-group w-100" role="group">\n                    <button id="${this.id}-previous" type="button" aria-label="Previous month" class="btn btn-primary"><i class="bi bi-chevron-left"></i></button>\n                    <button id="${this.id}-title" type="button" class="btn btn-primary" >${this.getTitle()}</button>\n                    <button id="${this.id}-next" type="button" aria-label="Next month" class="btn btn-primary"><i class="bi bi-chevron-right"></i></button>\n                </div>\n            </div>\n        `,t+=`<div id="${this.id}-view" class="bet-calendar-view"></div>`,t+=`\n            <div id="${this.id}-grand-total" class="bet-calendar-total">\n                <span>Total:</span>\n                <span id="total" class="bet-calendar-total-text"></span>\n            </div>\n        `,t+="</div>",t}setTotal(){const t=this.total>0?"positive":0>this.total?"negative":"neutral",e=document.querySelector("#"+this.id+" #total");e.classList.remove("positive","negative","neutral"),e.classList.add(t),e.innerHTML=""+i(this.total)}getTitle(){const t=this.currentDate.getFullYear(),e=(this.currentDate.getMonth(),this.currentDate.toLocaleString("default",{month:"long"})),n=this.currentDate.toLocaleDateString("en-AU",{weekday:"short"}),a=this.currentDate.getDate();return"year"==this.mode?t:"month"==this.mode?`${e} ${t}`:"day"==this.mode?`${n}, ${a} ${e} ${t}`:"Invalid mode "+this.mode}updateTitle(){document.querySelector("#"+this.id+"-title").innerHTML=this.getTitle()}async renderView(){this.maxprofitCellID="",this.minProfitCellID="",[].slice.call(document.querySelectorAll("#"+this.id+' [data-bs-toggle="tooltip"]')).map((function(t){const e=bootstrap.Tooltip.getInstance(t);e&&e.dispose()})),document.querySelectorAll(`#${this.id} .bet-calendar-day-cell`).forEach((t=>{t.classList.remove("max-profit","min-profit")}));const t=await this.getViewHTML();document.querySelector("#"+this.id+"-view").innerHTML=t,this.updateBackgrounds(),[].slice.call(document.querySelectorAll("#"+this.id+' [data-bs-toggle="tooltip"]')).map((function(t){return new bootstrap.Tooltip(t)})),""!=this.maxprofitCellID&&document.querySelector("#"+this.id+" #"+this.maxprofitCellID).classList.add("max-profit"),""!=this.minProfitCellID&&document.querySelector("#"+this.id+" #"+this.minProfitCellID).classList.add("min-profit"),"year"==this.mode?document.querySelectorAll(`#${this.id} .month-cell`).forEach((t=>{t.addEventListener("click",(()=>{const e=t.getAttribute("data-date");this.setDate(e),this.changeMode("month")}))})):"month"==this.mode?document.querySelectorAll(`#${this.id} .bet-calendar-day-cell`).forEach((t=>{t.addEventListener("click",(()=>{const e=t.getAttribute("data-date");this.setDate(e),this.changeMode("day")}))})):"month"!=this.mode&&"year"!=this.mode||(this.togglePending(),this.toggleProfit(),this.toggleTotal(),this.toggleWeekDayTotal())}async changeMode(t){this.mode=t,this.updateTitle(),$(".view-group button").removeClass("active"),$(`#${this.id}-btn-view-${this.mode}`).addClass("active"),await this.renderView()}toggleProfit(){document.querySelectorAll(`#${this.id} .bet-calendar-text.profit`).forEach((t=>{t.style.display=this.options.showProfit?"":"none"}))}toggleTotal(){const t=document.querySelector(`#${this.id} .bet-calendar-total`);t&&t.classList.toggle("d-none",!this.options.showTotal)}toggleWeekDayTotal(){const t=document.querySelector(`#${this.id} .bet-calendar-summary-row`);t&&(t.style.display=this.options.showWeekDayTotal?"":"none")}togglePending(){const t=this.options.showPending;document.querySelectorAll(`#${this.id} .bet-calendar-text.pending`).forEach((e=>{e.style.display=t?"":"none"}))}updateBackgrounds(){document.querySelectorAll(`#${this.id} .bet-calendar-day-cell.has-data`).forEach((t=>{t.classList.remove("pending","positive","negative");const e=t.querySelector(".bet-calendar-text.pending"),n=t.querySelector(".bet-calendar-text.profit");if(e)t.classList.add("pending");else if(n){const e=n.textContent.replace(/[^0-9.-]/g,""),a=parseFloat(e);a>0?t.classList.add("positive"):0>a&&t.classList.add("negative")}}))}async getViewHTML(){const t=await e(this.mode,this.currentDate.getFullYear(),this.currentDate.getMonth(),this.getFormattedDate());let n="";return"day"==this.mode?n=this.generateDayView(t):(n+=`<table id="${this.id}-table" class="bet-calendar-table">`,"month"===this.mode?(n+='\n                    <thead class="bet-calendar-header-row">\n                        <tr>\n                            <th class="bet-calendar-header-cell">Mon</th>\n                            <th class="bet-calendar-header-cell">Tue</th>\n                            <th class="bet-calendar-header-cell">Wed</th>\n                            <th class="bet-calendar-header-cell">Thu</th>\n                            <th class="bet-calendar-header-cell">Fri</th>\n                            <th class="bet-calendar-header-cell">Sat</th>\n                            <th class="bet-calendar-header-cell">Sun</th>\n                        </tr>\n                    </thead>',n+=this.generateMonthView(t)):"year"===this.mode&&(n+=this.generateYearView(t)),n+="</table"),this.total=this.calculateTotal(t),this.setTotal(),n}generateYearView(t){let e="<tbody>";e+="<tr>";let n=0,a=0;const s=this.currentDate.getFullYear();for(let o=0;12>o;o++){const l=new Date(s,o).toLocaleString("default",{month:"short"}),d=t[o],r=void 0!==d,c=o==(new Date).getMonth()&&s==(new Date).getFullYear(),h=r&&void 0!==d.profit,u=r&&void 0!==d.pending,b=`${this.id}-day-cell-${o}`;let g="bet-calendar-day-cell";c&&(g+=" today");let p=0,m=0;h&&(p=d.profit,p>n&&(n=p,this.maxprofitCellID=b),a>p&&(a=p,this.minProfitCellID=b)),u&&(m=d.pending),r&&(g+=" has-data",m>0?g+=" pending":p>0?g+=" positive":0>p&&(g+=" negative"));let f="";f+=p>0?" positive":0>p?" negative":" neutral";const y=h?i(p):"",v=u?m:"";e+=`\n                <td class="calendar-cell bet-calendar-month">\n                    <div id="${b}" data-date="${s}-${(o+1+"").padStart(2,"0")}-01" class="month-cell ${g} position-relative">\n                        <div class="bet-calendar-month-name">${l}</div>\n                        <div class="d-flex justify-content-around w-100 p-0 align-items-center">\n                            ${v?`<span style="${this.options.showPending?"":"display:none;"} color: black;" class="position-absolute top-0 end-0 overflow-visible bet-calendar-text bet-calendar-day-text pending badge bg-warning">${v}</span>`:""}\n                            ${y?`<div style="${this.options.showProfit?"":"display:none;"}" class="bet-calendar-text bet-calendar-month-text profit ${f}">${y}</div>`:""}\n                        </div>\n                    </div>\n                </td>\n            `,(o+1)%3==0&&(e+="</tr>",11>o&&(e+="<tr>"))}return e+="</tr></tbody>",e}generateMonthView(t){const e=this.currentDate.getMonth(),n=this.currentDate.getFullYear(),a=new Date(n,e,1),s=new Date(n,e+1,0).getDate(),o=(a.getDay()+6)%7;let l="<tbody>",d=[];const r=[,,,,,,,].fill(0);for(let t=0;o>t;t++)d.push('<td class="calendar-cell bet-calendar-day"></td>');let c=0,h=0;for(let a=1;s>=a;a++){const s=`${n}-${(e+1+"").padStart(2,"0")}-${(a+"").padStart(2,"0")}`,u=t[s],b=void 0!==u,g=this.isToday(n,e,a),p=b&&void 0!==u.profit,m=b&&void 0!==u.pending,f=(new Date(s).getDay()+6)%7,y=`${this.id}-day-cell-${a}`;let v="bet-calendar-day-cell";g&&(v+=" today");let w=0,x=0;p&&(w=u.profit,w>c&&(c=w,this.maxprofitCellID=y),h>w&&(h=w,this.minProfitCellID=y)),m&&(x=u.pending),p&&(r[f]+=w),b&&(v+=" has-data",x>0?v+=" pending":w>0?v+=" positive":0>w&&(v+=" negative"));let $="";$+=w>0?" positive":0>w?" negative":" neutral";const k=p?i(w):"",D=m?x:"";d.push(`\n                <td class="calendar-cell bet-calendar-day">\n                    <div\n                        id="${y}"\n                        class="${v} position-relative"\n                        data-profit="${w}"\n                        data-date="${s}"\n                        data-pending="${x}"\n                        data-bs-toggle="tooltip" data-bs-placement="top" title="${k}"\n                    >\n                        <div class="bet-calendar-day-number">${a}</div>\n                        <div class="d-flex justify-content-around w-100 p-0 align-items-center">\n                            ${D?`<span style="${this.options.showPending?"":"display:none;"} color: black;" class="z-3 position-absolute top-0 start-100 translate-middle overflow-visible bet-calendar-text bet-calendar-day-text pending badge bg-warning">${D}</span>`:""}\n                            ${k?`<div style="${this.options.showProfit?"":"display:none;"}" class="bet-calendar-text bet-calendar-day-text profit ${$}">${k}</div>`:""}\n                        </div>\n                    </div>\n                </td>\n            `),(o+a-1)%7==6&&(l+=`<tr>${d.join("")}</tr>`,d=[])}for(;7>d.length&&d.length>0;)d.push('<td class="calendar-cell bet-calendar-day"></td>');d.length>0&&(l+=`<tr>${d.join("")}</tr>`),l+='<tr class="bet-calendar-summary-row">';for(let t=0;7>t;t++){const e=r[t],n=e>0?"positive":0>e?"negative":"neutral",a=0!==e?new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD",minimumFractionDigits:2}).format(e):"";l+=`<td data-bs-toggle="tooltip" data-bs-placement="top" title="${a}" class="calendar-cell">\n                <div class="bet-calendar-summary-text ${n}">${a}</div>\n            </td>`}return l+="</tr></tbody>",l}isToday(t,e,n){const a=new Date;return t===a.getFullYear()&&e===a.getMonth()&&n===a.getDate()}calculateTotal(t){let e=0;if("month"===this.mode)for(const n of Object.values(t))n&&"number"==typeof n.profit&&(e+=n.profit);else if("year"===this.mode)for(let n=0;12>n;n++){const a=t[n];a&&"number"==typeof a.profit&&(e+=a.profit)}else"day"===this.mode&&(e=t.resulted.reduce(((t,e)=>t+(parseFloat(e.profit)||0)),0));return e}renderBetListItem(t,e){const n=e.map((e=>`\n            <li class="small">\n                <a class="status-dropdown-item dropdown-item" href="#" data-date="${this.getFormattedDate()}" data-bet-id="${t.bet_id}" data-status="${e}">${e}</a>\n            </li>\n        `)).join(""),a=this.getBetStatusClass(t.status),s=this.getProfitColourClass(t.profit);let o=t.bookmaker;t.bookmaker_url&&(o=`<a style="cursor: default;" class="bookmaker-link" href="${t.bookmaker_url}" target="_blank">${t.bookmaker}</a>`);const l=t.sport?t.sport:"",d=t.event_name?t.event_name:"";let r;return r=l&&d?`<div class="text-muted text-truncate small">${t.sport} • ${t.event_name}</div>`:`<div class="text-muted text-truncate small">${l||d}</div>`,`\n            <li class="list-group-item border rounded p-2 shadow-sm ${a}" id="${t.bet_id}-row">\n                <div class="row">\n                    <div class="col-8 d-flex">\n                        <a data-bet-id=${t.bet_id} class="edit-bet-link bi bi-pencil-square"></a>&nbsp;\n                        <div class="fw-semibold text-truncate selection-text" title="${t.selection}">\n                        ${t.selection}\n                        </div>\n                    </div>\n                    <div class="col-4 text-end text-nowrap">\n                        <div class="small text-muted">${t.bet_type}</div>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-8">\n                        <div class="" title="${t.selection}">\n                        ${r}\n                        </div>\n                    </div>\n                    <div class="col-4 text-end text-nowrap">\n                    </div>\n                </div>\n\n                <div class="row">\n                    <div class="col d-flex align-items-center justify-content-between">\n                        <div class="small text-nowrap">${o} • ${i(t.stake)} @ ${t.odds}</div>\n                    </div>\n                    <div class="col">\n                        <div class="d-flex justify-content-end align-items-center text-nowrap">\n                            <span id="${t.bet_id}-profit" class="small me-2 ${s}">${i(t.profit)}</span>\n                            <div class="dropdown">\n                                <button class="badge bg-primary rounded-pill dropdown-toggle border-0 text-truncate" style="cursor: default; max-width: 112px;" type="button" id="${t.bet_id}-status-dropdown" data-bs-toggle="dropdown">\n                                    ${t.status}\n                                </button>\n                                <ul style="z-index: 9999;" class="position-fixed dropdown-menu dropdown-menu-end text-end p-0" style="min-width: auto;" aria-labelledby="${t.bet_id}-status-dropdown">\n                                    ${n}\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </li>\n        `}generateDayView(t){const e=t.pending,n=t.resulted;let a="",i="";this.options.showPending&&e.length?a="show active":i="show active";const s=this.statuses.filter((t=>"Cashed Out"!==t)),o="betsView-"+Math.random().toString(36).substr(2,9);return`\n            <ul class="nav calendar-bet-tabs nav-tabs mb-3 d-flex" id="${o}" role="tablist">\n                <li class="nav-item w-50" role="presentation">\n                    <button class="nav-link w-100 d-flex align-items-center ${a}" id="${o}-pending-tab" data-bs-toggle="tab" data-bs-target="#${o}-pending"\n                    type="button" role="tab"><span class="badge bg-danger ${0==e.length?"d-none":""}">${e.length}</span>&nbsp;Pending</button>\n                </li>\n                <li class="nav-item w-50" role="presentation">\n                    <button class="w-100 nav-link d-flex align-items-center ${i}" id="${o}-resulted-tab" data-bs-toggle="tab" data-bs-target="#${o}-resulted"\n                    type="button" role="tab"><span class="badge bg-primary ${0==n.length?"d-none":""}">${n.length}</span>&nbsp;Resulted</button>\n                </li>\n            </ul>\n            <div class="tab-content overflow-y-auto"  id="${o}-tabContent">\n                <div class="tab-pane fade ${a}" id="${o}-pending" role="tabpanel">\n                    ${e.length?this.renderBetListGroup(e,s):'<div class="text-muted small">No pending bets.</div>'}\n                </div>\n                <div class="tab-pane fade ${i}" id="${o}-resulted" role="tabpanel">\n                    ${n.length?this.renderBetListGroup(n,s):'<div class="text-muted small">No resulted bets.</div>'}\n                </div>\n            </div\n        `}getProfitColourClass(t){return 0>t?"loss-text":t>0?"profit-text":""}getBetStatusClass(t){switch(t){case"Won":return"bet-status-won";case"Lost":return"bet-status-lost";case"Cashed Out":return"bet-status-cashedout";case"Void":return"bet-status-void";case"Pending":return"bet-status-pending";case"Bonus Cash Refund":case"Bonus Refund":return"bet-status-bonus";default:return"bet-status-default"}}renderBetListGroup(t,e){let n='<div class="list-group gap-1">';for(const a of t)n+=this.renderBetListItem(a,e);return n+="</div>",n}}